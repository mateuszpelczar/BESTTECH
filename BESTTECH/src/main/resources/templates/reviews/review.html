<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Twoje Opinie</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container mt-5">

  <h1 class="mb-4 text-center">Wystaw opinię o zakupionych produktach</h1>

  <!-- Przyciski powrotu -->
  <div class="text-center mb-4">
    <a th:href="@{/#}" class="btn btn-outline-primary">Powrót do strony głównej</a>
  </div>

  <!-- Produkty bez opinii -->
  <div class="card mb-5">
    <div class="card-header bg-primary text-white">
      Produkty do oceny
    </div>
    <div class="card-body">

      <div th:if="${#lists.isEmpty(produktyBezRecenzji)}" class="text-center">
        <p>Brak produktów do oceny.</p>
      </div>

      <div class="row" th:each="produkt : ${produktyBezRecenzji}">
        <div class="col-md-6 mb-3">
          <div class="card shadow-sm">
            <div class="card-body">
              <h5 class="card-title" th:text="${produkt.nazwa}">Nazwa produktu</h5>
              <a th:href="@{/opinie/dodaj_opinie(produktId=${produkt.produktID})}" class="btn btn-success">Wystaw opinię</a>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- Twoje opinie -->
  <div class="card">
    <div class="card-header bg-secondary text-white">
      Twoje Opinie
    </div>
    <div class="card-body">

      <div th:if="${#lists.isEmpty(recenzjeUzytkownika)}" class="text-center">
        <p>Nie dodałeś jeszcze żadnej opinii.</p>
      </div>

      <div class="row" th:each="recenzja : ${recenzjeUzytkownika}">
        <div class="col-md-6 mb-3">
          <div class="card shadow-sm">
            <div class="card-body">
              <h5 class="card-title" th:text="${recenzja.produkt.nazwa}">Nazwa produktu</h5>
              <p class="mb-1"><strong>Ocena:</strong> <span th:text="${recenzja.ocena}">5</span>/5</p>
              <p><strong>Treść:</strong> <span th:text="${recenzja.tresc}">Treść opinii</span></p>
              <p class="text-muted small">
                Dodano:
                <span th:text="${#dates.format(recenzja.dataDodania, 'dd.MM.yyyy HH:mm')}">data</span>

                <!-- Jeśli opinia jest oczekująca lub odrzucona -->
                <span th:if="${recenzja.status == 'OCZEKUJACA'}" class="text-secondary ms-2">(Oczekująca)</span>
                <span th:if="${recenzja.status == 'ODRZUCONA'}" class="text-danger ms-2">(Odrzucona)</span>
              </p>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
